<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lycée de l’Excellence - Physique</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* أنماط CSS الأساسية */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* أنماط الرأس */
    header {
      background: linear-gradient(135deg, #2c3e50, #3498db);
      color: white;
      padding: 15px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .logo img {
      width: 50px;
      height: 50px;
    }
    
    .logo h1 {
      font-size: 1.8rem;
    }
    
    nav ul {
      display: flex;
      list-style: none;
      gap: 20px;
    }
    
    nav a {
      color: white;
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 4px;
      transition: background 0.3s;
    }
    
    nav a:hover {
      background: rgba(255,255,255,0.1);
    }
    
    .auth-buttons {
      display: flex;
      gap: 10px;
    }
    
    .btn {
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .btn-primary {
      background: #3498db;
      color: white;
    }
    
    .btn-accent {
      background: #e74c3c;
      color: white;
    }
    
    .btn-success {
      background: #2ecc71;
      color: white;
    }
    
    .btn-outline {
      background: transparent;
      border: 1px solid #3498db;
      color: #3498db;
    }
    
    .btn-ghost {
      background: transparent;
      color: #3498db;
    }
    
    .btn:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    
    /* أنماط البطل */
    .hero {
      background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHJlY3Qgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiIGZpbGw9IiMzNDk4ZGIiIG9wYWNpdHk9IjAuNSIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yNTYgODhDMTYzLjggODggODggMTYzLjggODggMjU2czc1LjggMTY4IDE2OCAxNjggMTY4LTc1LjggMTY4LTE2OFMzNDguMiA4OCAyNTYgODh6bTAgMjk2Yy03MC43IDAtMTI4LTU3LjMtMTI4LTEyOHM1Ny4zLTEyOCAxMjgtMTI4IDEyOCA1Ny4zIDEyOCAxMjgtNTcuMyAxMjgtMTI4IDEyOHptMTYtMTQ0aC0zMnYtNjRoLTY0djY0aC0zMmMtOC44IDAtMTYgNy4yLTE2IDE2djMyYzAgOC44IDcuMiAxNiAxNiAxNmgxMjhjOC44IDAgMTYtNy4yIDE2LTE2di0zMmMwLTguOC03LjItMTYtMTYtMTZ6Ii8+PC9zdmc+');
      background-size: cover;
      background-position: center;
      color: white;
      text-align: center;
      padding: 80px 0;
    }
    
    .hero-content h2 {
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    
    /* أنماط صندوق الإعلانات */
    .announcement-box {
      background: #fff9c4;
      border-left: 5px solid #ffc107;
      padding: 15px 20px;
      margin: 20px 0;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .announcement-box i {
      font-size: 1.5rem;
      color: #ff9800;
    }
    
    .announcement-image {
      max-width: 100%;
      margin-top: 10px;
      border-radius: 5px;
    }
    
    /* أنماط الأقسام */
    .section-title {
      text-align: center;
      margin: 40px 0 30px;
      color: #2c3e50;
      font-size: 2rem;
    }
    
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .feature-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      transition: transform 0.3s;
      cursor: pointer;
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
    }
    
    .feature-icon {
      font-size: 2.5rem;
      color: #3498db;
      margin-bottom: 15px;
    }
    
    .feature-content h3 {
      margin-bottom: 10px;
      color: #2c3e50;
    }
    
    /* أنماط لوحة التحكم */
    .student-dashboard, .admin-panel {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin: 30px 0;
    }
    
    .welcome-banner {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }
    
    .student-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    
    .student-tab {
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 4px;
    }
    
    .student-tab.active {
      background: #3498db;
      color: white;
    }
    
    .student-tab-content {
      display: none;
    }
    
    .student-tab-content.active {
      display: block;
    }
    
    .dashboard-card {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }
    
    .content-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
    }
    
    .content-item {
      background: white;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .content-item h4 {
      margin-bottom: 10px;
      color: #2c3e50;
    }
    
    .content-item a {
      display: inline-block;
      margin-top: 10px;
      color: #3498db;
      text-decoration: none;
    }
    
    /* أنماط لوحة الإدارة */
    .admin-dashboard {
      display: flex;
      gap: 20px;
    }
    
    .admin-sidebar {
      flex: 0 0 250px;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
    }
    
    .admin-menu {
      list-style: none;
      margin-top: 20px;
    }
    
    .admin-menu li {
      margin-bottom: 10px;
    }
    
    .admin-menu a {
      display: block;
      padding: 10px;
      color: #333;
      text-decoration: none;
      border-radius: 4px;
    }
    
    .admin-menu a:hover, .admin-menu a.active {
      background: #3498db;
      color: white;
    }
    
    .admin-content {
      flex: 1;
    }
    
    .admin-section {
      display: none;
    }
    
    .admin-section.active {
      display: block;
    }
    
    .content-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      margin-bottom: 20px;
    }
    
    .card-content {
      padding: 20px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
    }
    
    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    
    .form-row {
      display: flex;
      gap: 15px;
    }
    
    .form-row .form-group {
      flex: 1;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .stat-card h3 {
      font-size: 2.5rem;
      color: #3498db;
      margin-bottom: 10px;
    }
    
    /* أنماط الجداول */
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    table th, table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    
    table th {
      background: #f8f9fa;
      font-weight: 600;
    }
    
    /* أنماط التذييل */
    footer {
      background: #2c3e50;
      color: white;
      padding: 40px 0 20px;
      margin-top: 60px;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .footer-section h3 {
      margin-bottom: 15px;
      font-size: 1.2rem;
    }
    
    .contact-info {
      list-style: none;
    }
    
    .contact-info li {
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .footer-bottom {
      text-align: center;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    /* أنماط نافذة تسجيل الدخول */
    .login-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    
    .login-form {
      background: white;
      border-radius: 8px;
      padding: 30px;
      width: 100%;
      max-width: 400px;
    }
    
    .login-form h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .form-buttons {
      margin-top: 20px;
      justify-content: space-between;
    }
    
    /* أنماط مساعدة */
    .muted {
      color: #6c757d;
    }
    
    .mb-2 {
      margin-bottom: 20px;
    }
    
    .mb-3 {
      margin-bottom: 30px;
    }
    
    .mt-1 {
      margin-top: 10px;
    }
    
    .mt-2 {
      margin-top: 20px;
    }
    
    .flex {
      display: flex;
    }
    
    .right {
      margin-left: auto;
    }
    
    .inline {
      display: flex;
      gap: 10px;
    }
    
    .w-100 {
      width: 100%;
    }
    
    .image-preview {
      max-width: 100%;
      margin-top: 10px;
      border-radius: 5px;
      display: none;
    }
    
    /* أنماط الكويز */
    .quiz-container {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .quiz-timer {
      background: #e74c3c;
      color: white;
      padding: 10px;
      border-radius: 4px;
      text-align: center;
      margin-bottom: 20px;
      font-weight: bold;
    }
    
    .quiz-question {
      margin-bottom: 20px;
    }
    
    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .quiz-option {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    .quiz-option:hover {
      background: #f8f9fa;
    }
    
    .quiz-option.selected {
      background: #3498db;
      color: white;
      border-color: #3498db;
    }
    
    .quiz-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 20px;
    }
    
    .quiz-submission {
      text-align: center;
      margin-top: 20px;
    }
    
    .quiz-results {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    /* أنماط الاستجابة */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 15px;
      }
      
      nav ul {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .admin-dashboard {
        flex-direction: column;
      }
      
      .admin-sidebar {
        flex: 0 0 auto;
      }
      
      .form-row {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container header-content">
      <div class="logo">
        <img alt="Logo" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzM0OThkYiIgZD0iTTI1NiA4QzExOSA4IDggMTE5IDggMjU2czExMSAyNDggMjQ4IDI0OCAyNDgtMTExIDI0OC0yNDhTMzkzIDggMjU2IDh6bTAgNDQ4Yy0xMTAuNSAwLTIwMC04OS41LTIwMC0yMDAgMC0xMTAuNSA4OS41LTIwMCAyMDAtMjAwIDEwOSAwIDIwMCA4OS41IDIwMCAyMDAtODkuNSAyMDAtMjAwIDIwMHoiLz48cGF0aCBmaWxsPSIjMzQ5OGRiIiBkPSJNMjcyIDEzNmgtMzJjLTQuNCAwLTggMy42LTggOHYzNTJjMCA0LjQgMy42IDggOCA4aDMyYzQuNCAwIDgtMy42IDgtOFYxNDRjMC00LjQtMy42LTgtOC04em05Ni0xNjBoLTMyYy00LjQgMC04IDMuNi04IDh2NTEyYzAgNC40IDMuNiA4IDggOGgzMmM0LjQgMCA4LTMuNiA4LThWLTE2YzAtNC40LTMuNi04LTgtOHoiLz48L3N2Zz4=" />
        <h1>Lycée de l'Excellence</h1>
      </div>
      <nav>
        <ul>
          <li><a href="#" class="nav-link" data-section="home">Accueil</a></li>
          <li><a href="#" class="nav-link" data-section="dictionary">Lexique</a></li>
          <li><a href="#" class="nav-link" data-section="quiz">Quiz</a></li>
          <li><a href="#" class="nav-link" data-section="grades">Notes</a></li>
          <li><a href="#" class="nav-link" data-section="exams">Examens</a></li>
          <li><a href="#" class="nav-link" data-section="exercises">Exercices</a></li>
          <li><a href="#" class="nav-link" data-section="lessons">Leçons</a></li>
        </ul>
      </nav>
      <div class="auth-buttons">
        <button class="btn btn-primary" id="studentLoginBtn"><i class="fa-solid fa-user-graduate"></i> Espace Élève</button>
        <button class="btn btn-accent" id="loginBtn"><i class="fa-solid fa-user-shield"></i> Espace Professeur</button>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" id="home-section">
    <div class="container hero-content">
      <h2>Bienvenue au Lycée de l'Excellence</h2>
      <p>Plateforme éducative dédiée à la physique sous la supervision du Professeur Ali Bairouk</p>
    </div>
  </section>

  <!-- Announcement Box - UPDATED WITH IMAGE SUPPORT -->
  <div class="announcement-box" id="announcementBox">
    <i class="fas fa-bullhorn"></i>
    <div class="announcement-content">
      <p id="announcementText">ستبدأ الدراسة الفعلية يوم 16/09/2025 نتمنى لتلاميذ والتلميذات سنة دراسية مليئة بالجد ومثمرة</p>
      <img id="announcementImage" class="announcement-image" src="" alt="Announcement image" style="display: none;">
    </div>
  </div>

  <div class="container">
    <!-- Features -->
    <h2 class="section-title">Sections du Site</h2>
    <div class="features">
      <div class="feature-card" data-section="dictionary">
        <div class="feature-icon"><i class="fas fa-book"></i></div>
        <div class="feature-content"><h3>Lexique Scientifique</h3><p>Traduction des termes scientifiques arabes → français.</p></div>
      </div>
      <div class="feature-card" data-section="quiz">
        <div class="feature-icon"><i class="fas fa-question-circle"></i></div>
        <div class="feature-content"><h3>Quiz</h3><p>Quiz تفاعلية لتثبيت المفاهيم.</p></div>
      </div>
      <div class="feature-card" data-section="grades">
        <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
        <div class="feature-content"><h3>Notes</h3><p>عرض النقاط عبر حساب التلميذ أو Code Parcours.</p></div>
      </div>
      <div class="feature-card" data-section="exams">
        <div class="feature-icon"><i class="fas fa-file-alt"></i></div>
        <div class="feature-content"><h3>Examens Antérieurs</h3><p>امتحانات مع التصحيحات.</p></div>
      </div>
      <div class="feature-card" data-section="exercises">
        <div class="feature-icon"><i class="fas fa-tasks"></i></div>
        <div class="feature-content"><h3>Exercices et Solutions</h3><p>تمارين محلولة بتفصيل.</p></div>
      </div>
      <div class="feature-card" data-section="lessons">
        <div class="feature-icon"><i class="fas fa-graduation-cap"></i></div>
        <div class="feature-content"><h3>Leçons</h3><p>دروس شاملة للبرنامج.</p></div>
      </div>
    </div>

    <!-- Student Dashboard -->
    <section id="student-dashboard" class="student-dashboard" style="display: none;">
      <div class="welcome-banner">
        <h2 id="studentWelcome">Bienvenue, Élève</h2>
        <p>Vous trouverez ici toutes vos ressources pédagogiques</p>
      </div>
      
      <!-- Student Tabs Navigation -->
      <div class="student-tabs">
        <div class="student-tab active" data-tab="dashboard">Tableau de bord</div>
        <div class="student-tab" data-tab="quiz">Quiz</div>
        <div class="student-tab" data-tab="exercises">Exercices</div>
        <div class="student-tab" data-tab="dictionary">Lexique</div>
        <div class="student-tab" data-tab="revision">Demande de récorrection</div>
      </div>
      
      <!-- Dashboard Tab -->
      <div id="student-dashboard-tab" class="student-tab-content active">
        <div class="dashboard-card">
          <h3>Vos Notes Récentes</h3>
          <div id="studentRecentGrades">
            <p class="muted">Aucune note disponible pour le moment.</p>
          </div>
        </div>
        
        <div class="dashboard-card">
          <h3>Ressources Disponibles</h3>
          <div class="content-grid" id="studentResources">
            <!-- Will be populated by JavaScript -->
          </div>
        </div>
      </div>
      
      <!-- Quiz Tab - UPDATED WITH NEW QUIZ INTERFACE -->
      <div id="student-quiz-tab" class="student-tab-content">
        <div class="dashboard-card">
          <h3>Quiz Disponibles</h3>
          <div id="studentQuizList">
            <p class="muted">Aucun quiz disponible pour le moment.</p>
          </div>
        </div>
        
        <div class="dashboard-card">
          <h3>Résultats des Quiz</h3>
          <div id="studentQuizResults">
            <p class="muted">Aucun résultat de quiz pour le moment.</p>
          </div>
        </div>
        
        <!-- New Quiz Interface -->
        <div id="quizContainer" class="quiz-container" style="display: none;">
          <div class="quiz-timer" id="quizTimer">Temps restant: 30:00</div>
          <div id="quizQuestionsContainer">
            <!-- Quiz questions will be loaded here -->
          </div>
          <div class="quiz-navigation">
            <button class="btn btn-outline" id="prevQuestion">Précédent</button>
            <span id="questionCounter">Question 1 sur 5</span>
            <button class="btn btn-outline" id="nextQuestion">Suivant</button>
          </div>
          <div class="quiz-submission">
            <button class="btn btn-success" id="submitQuiz">Soumettre le quiz</button>
          </div>
        </div>
        
        <div id="quizResultsContainer" class="quiz-results" style="display: none;">
          <h3>Résultats du Quiz</h3>
          <div id="quizResultsContent">
            <!-- Quiz results will be displayed here -->
          </div>
        </div>
      </div>
      
      <!-- Exercises Tab -->
      <div id="student-exercises-tab" class="student-tab-content">
        <div class="dashboard-card">
          <h3>Exercices Disponibles</h3>
          <div class="content-grid" id="studentExercisesList">
            <!-- Will be populated by JavaScript -->
          </div>
        </div>
      </div>
      
      <!-- Dictionary Tab -->
      <div id="student-dictionary-tab" class="student-tab-content">
        <div class="dashboard-card">
          <h3>Lexique Scientifique</h3>
          <div class="content-grid" id="studentDictionaryContent">
            <!-- Will be populated by JavaScript -->
          </div>
        </div>
      </div>
      
      <!-- Revision Request Tab - UPDATED TO "Demande de récorrection" -->
      <div id="student-revision-tab" class="student-tab-content">
        <div class="dashboard-card">
          <h3>Demande de Récorrection de Note</h3>
          <div class="revision-request-form">
            <p>Si vous souhaitez demander une récorrection pour une de vos notes, veuillez remplir le formulaire ci-dessous.</p>
            <form id="revisionRequestForm">
              <div class="form-group">
                <label for="revisionExam">Examen/Devoir</label>
                <select id="revisionExam" required>
                  <option value="">Sélectionnez une évaluation</option>
                </select>
              </div>
              <div class="form-group">
                <label for="revisionMessage">Message</label>
                <textarea id="revisionMessage" rows="3" placeholder="Expliquez pourquoi vous demandez une récorrection." required></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Envoyer la demande</button>
            </form>
          </div>
        </div>
        
        <div class="dashboard-card">
          <h3>Vos Demandes de Récorrection</h3>
          <div id="studentRevisionRequests">
            <p class="muted">Vous n'avez pas encore soumis de demandes de récorrection.</p>
          </div>
        </div>
      </div>
      
      <div class="flex right">
        <button class="btn btn-ghost" id="studentLogoutBtn"><i class="fa-solid fa-right-from-bracket"></i> Déconnexion</button>
      </div>
    </section>

    <!-- Dictionary -->
    <section id="dictionary" class="page-section" style="display: none;">
      <div class="section-header">
        <h2>Lexique Scientifique</h2>
        <p>Ar → Fr</p>
      </div>
      
      <!-- Dictionary Content -->
      <div class="content-grid" id="dictionaryContent">
        <!-- Will be populated by JavaScript -->
      </div>
    </section>

    <!-- Quiz -->
    <section id="quiz" class="page-section" style="display: none;">
      <div class="section-header">
        <h2>Quiz de Physique</h2>
        <p>Testez vos connaissances</p>
      </div>
      
      <!-- Quiz Content -->
      <div id="quizContent">
        <!-- Will be populated by JavaScript -->
      </div>
    </section>

    <!-- Grades (Students area) -->
    <section id="grades" class="page-section" style="display: none;">
      <div class="section-header">
        <h2>Consultation des Notes</h2>
        <p class="muted">Via connexion ou par Code Parcours</p>
      </div>

      <!-- Search by code -->
      <div class="content-card mb-3">
        <div class="card-content">
          <div class="form-row">
            <div class="form-group">
              <label for="searchCode">Code Parcours</label>
              <input type="text" id="searchCode" placeholder="Ex: P-2024-001">
            </div>
            <div class="form-group">
              <label>&nbsp;</label>
              <button class="btn btn-primary w-100" id="btnSearchByCode"><i class="fa-solid fa-magnifying-glass"></i> Voir les notes</button>
            </div>
          </div>
          <p class="muted mt-1">Le code est défini par l’enseignant.</p>
        </div>
      </div>

      <!-- Results -->
      <div id="gradesResults" style="display:none">
        <h3 class="section-title">Vos Résultats</h3>
        <div id="studentInfo" class="mb-2"></div>
        <div class="content-card">
          <div class="card-content">
            <table id="gradesTable">
              <thead>
              <tr>
                <th>Date</th><th>Matière</th><th>Intitulé</th><th>Note /20</th><th>Remarque</th>
              </tr>
              </thead>
              <tbody></tbody>
            </table>
            <p class="muted mt-2" id="noGradesMsg" style="display:none">Aucune note pour le moment.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Exams -->
    <section id="exams" class="page-section" style="display: none;">
      <div class="section-header">
        <h2>Examens Antérieurs</h2>
        <p>Consultez & téléchargez</p>
      </div>
      
      <!-- Exams Content -->
      <div class="content-grid" id="examsContent">
        <!-- Will be populated by JavaScript -->
      </div>
    </section>

    <!-- Exercises -->
    <section id="exercises" class="page-section" style="display: none;">
      <div class="section-header">
        <h2>Exercices et Solutions</h2>
        <p>تمارين محلولة بتفصيل</p>
      </div>
      
      <!-- Exercises Content -->
      <div class="content-grid" id="exercisesContent">
        <!-- Will be populated by JavaScript -->
      </div>
    </section>

    <!-- Lessons -->
    <section id="lessons" class="page-section" style="display: none;">
      <div class="section-header">
        <h2>Leçons</h2>
        <p>دروس شاملة للبرنامج</p>
      </div>
      
      <!-- Lessons Content -->
      <div class="content-grid" id="lessonsContent">
        <!-- Will be populated by JavaScript -->
      </div>
    </section>

    <!-- Admin Panel -->
    <section id="admin-panel" class="admin-panel" style="display: none;">
      <div class="admin-header">
        <h2>Panneau d'Administration</h2>
        <div class="flex right">
          <button class="btn btn-outline" id="btnExport"><i class="fa-solid fa-file-export"></i> Exporter JSON</button>
          <label class="btn btn-outline" for="importFile"><i class="fa-solid fa-file-import"></i> Importer JSON</label>
          <input type="file" id="importFile" accept="application/json" style="display:none">
          <button class="btn btn-ghost" id="logoutBtn"><i class="fa-solid fa-right-from-bracket"></i> Déconnexion</button>
          <button class="btn btn-ghost" id="adminLogoutBtn"><i class="fa-solid fa-right-from-bracket"></i> Déconnexion</button>
        </div>
      </div>

      <div class="admin-dashboard">
        <!-- Admin Sidebar -->
        <div class="admin-sidebar">
          <h3>Tableau de Bord</h3>
          <ul class="admin-menu">
            <li><a href="#" class="admin-tab-link active" data-tab="tab-dashboard"><i class="fas fa-tachometer-alt"></i> Tableau de bord</a></li>
            <li><a href="#" class="admin-tab-link" data-tab="tab-students"><i class="fa-solid fa-users"></i> Étudiants</a></li>
            <li><a href="#" class="admin-tab-link" data-tab="tab-grades"><i class="fa-solid fa-chart-line"></i> Notes</a></li>
            <li><a href="#" class="admin-tab-link" data-tab="tab-quiz"><i class="fa-solid fa-question-circle"></i> Quiz</a></li>
            <li><a href="#" class="admin-tab-link" data-tab="tab-dictionary"><i class="fa-solid fa-book"></i> Lexique</a></li>
            <li><a href="#" class="admin-tab-link" data-tab="tab-lessons"><i class="fa-solid fa-graduation-cap"></i> Leçons</a></li>
            <li><a href="#" class="admin-tab-link" data-tab="tab-exercises"><i class="fa-solid fa-tasks"></i> Exercices</a></li>
            <li><a href="#" class="admin-tab-link" data-tab="tab-exams"><i class="fa-solid fa-file-alt"></i> Examens</a></li>
            <li><a href="#" class="admin-tab-link" data-tab="tab-announcement"><i class="fa-solid fa-bullhorn"></i> Annonces</a></li>
            <li><a href="#" class="admin-tab-link" data-tab="tab-revisions"><i class="fa-solid fa-edit"></i> Demandes de récorrection</a></li>
          </ul>
        </div>

        <!-- Admin Content -->
        <div class="admin-content">
          <!-- Dashboard -->
          <div id="tab-dashboard" class="admin-section active">
            <h2>Tableau de Bord</h2>
            <div class="stats-grid">
              <div class="stat-card">
                <h3 id="stats-students">0</h3>
                <p>Étudiants</p>
              </div>
              <div class="stat-card">
                <h3 id="stats-quiz">0</h3>
                <p>Questions de Quiz</p>
              </div>
              <div class="stat-card">
                <h3 id="stats-dictionary">0</h3>
                <p>Termes de Lexique</p>
              </div>
              <div class="stat-card">
                <h3 id="stats-grades">0</h3>
                <p>Notes Enregistrées</p>
              </div>
            </div>
            
            <div class="content-card">
              <div class="card-content">
                <h3>Activité Récente</h3>
                <div id="recent-activity">
                  <p class="muted">Aucune activité récente.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Students -->
          <div id="tab-students" class="admin-section">
            <div class="content-card mb-3">
              <div class="card-content">
                <h3 class="mb-2">Créer / Modifier un Étudiant</h3>
                <div class="form-row">
                  <div class="form-group"><label>Nom complet</label><input id="stFullname" type="text" placeholder="Ex: Ahmed Amine"></div>
                  <div class="form-group"><label>Nom d'utilisateur</label><input id="stUsername" type="text" placeholder="Ex: ahmed.amine"></div>
                </div>
                <div class="form-row">
                  <div class="form-group"><label>Mot de passe</label><input id="stPassword" type="text" placeholder="••••••"></div>
                  <div class="form-group"><label>Code Parcours</label><input id="stCode" type="text" placeholder="Ex: P-2024-001"></div>
                </div>
                <div class="form-row">
                  <div class="form-group"><label>Classe</label><input id="stClassroom" type="text" placeholder="2ème Bac Sciences Physiques"></div>
                  <div class="form-group"><label>&nbsp;</label>
                    <div class="inline">
                      <button class="btn btn-success" id="btnSaveStudent"><i class="fa-solid fa-save"></i> Enregistrer</button>
                      <button class="btn btn-ghost" id="btnResetStudent">Vider</button>
                    </div>
                  </div>
                </div>
                <input type="hidden" id="stId">
              </div>
            </div>

            <div class="content-card">
              <div class="card-content">
                <div class="flex mb-2">
                  <strong>Liste des Étudiants</strong>
                  <input class="right" id="filterStudents" placeholder="Filtrer..." />
                </div>
                <table id="studentsTable">
                  <thead><tr><th>Nom</th><th>Utilisateur</th><th>Code</th><th>Classe</th><th>Actions</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Grades -->
          <div id="tab-grades" class="admin-section">
            <div class="content-card mb-3">
              <div class="card-content">
                <h3 class="mb-2">Ajouter une Note</h3>
                <div class="form-row">
                  <div class="form-group">
                    <label>Étudiant</label>
                    <select id="grStudent"></select>
                  </div>
                  <div class="form-group">
                    <label>Matière</label>
                    <input id="grSubject" type="text" placeholder="Électricité, Mécanique...">
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group"><label>Intitulé</label><input id="grTitle" type="text" placeholder="Contrôle 1"></div>
                  <div class="form-group"><label>Date</label><input id="grDate" type="date"></div>
                </div>
                <div class="form-row">
                  <div class="form-group"><label>Note /20</label><input id="grScore" type="number" min="0" max="20" step="0.25" placeholder="16.5"></div>
                  <div class="form-group"><label>Remarque</label><input id="grNote" type="text" placeholder="Très bien"></div>
                </div>
                <input type="hidden" id="grId">
                <div class="mt-2">
                  <button class="btn btn-success" id="btnSaveGrade"><i class="fa-solid fa-plus"></i> Enregistrer la note</button>
                  <button class="btn btn-ghost" id="btnResetGrade">Vider</button>
                </div>
              </div>
            </div>

            <div class="content-card">
              <div class="card-content">
                <div class="flex mb-2">
                  <strong>Notes par Étudiant</strong>
                  <select id="grFilterStudent" class="right"></select>
                </div>
                <table id="gradesAdminTable">
                  <thead><tr><th>Étudiant</th><th>Date</th><th>Matière</th><th>Intitulé</th><th>Note</th><th>Remarque</th><th>Actions</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Quiz -->
          <div id="tab-quiz" class="admin-section">
            <div class="content-card mb-3">
              <div class="card-content">
                <h3 class="mb-2">Ajouter une question au quiz</h3>
                <div class="form-group">
                  <label>Question</label>
                  <input id="adminQuizQuestion" type="text" placeholder="Entrez la question">
                </div>
                <div class="form-group">
                  <label>Image (optionnelle)</label>
                  <input id="adminQuizImage" type="file" accept="image/*">
                </div>
                <div class="form-group">
                  <label>Options de réponse</label>
                  <div class="form-row">
                    <input type="text" id="adminOption1" placeholder="Option 1" class="quiz-option-input">
                    <input type="text" id="adminOption2" placeholder="Option 2" class="quiz-option-input">
                    <input type="text" id="adminOption3" placeholder="Option 3" class="quiz-option-input">
                    <input type="text" id="adminOption4" placeholder="Option 4" class="quiz-option-input">
                  </div>
                </div>
                <div class="form-group">
                  <label>Réponse correcte</label>
                  <select id="adminQuizCorrect">
                    <option value="1">Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3">Option 3</option>
                    <option value="4">Option 4</option>
                  </select>
                </div>
                <div class="mt-2">
                  <button class="btn btn-success" id="adminBtnSaveQuiz"><i class="fa-solid fa-plus"></i> Ajouter la question</button>
                  <button class="btn btn-ghost" id="adminBtnResetQuiz">Nouvelle question</button>
                </div>
              </div>
            </div>
            
            <div class="content-card">
              <div class="card-content">
                <div class="flex mb-2">
                  <strong>Questions existantes</strong>
                </div>
                <div id="quizQuestionsList">
                  <p class="muted">Aucune question pour le moment.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Dictionary -->
          <div id="tab-dictionary" class="admin-section">
            <div class="content-card mb-3">
              <div class="card-content">
                <h3 class="mb-2">Ajouter un terme au lexique</h3>
                <div class="form-row">
                  <div class="form-group"><label>Terme arabe</label><input id="adminDictAr" type="text" placeholder="مصطلح علمي"></div>
                  <div class="form-group"><label>Terme français</label><input id="adminDictFr" type="text" placeholder="Terme scientifique"></div>
                </div>
                <div class="form-row">
                  <div class="form-group"><label>Définition</label><textarea id="adminDictDef" placeholder="Explication du terme" rows="3"></textarea></div>
                </div>
                <div class="mt-2">
                  <button class="btn btn-success" id="adminBtnSaveDict"><i class="fa-solid fa-plus"></i> Ajouter le terme</button>
                  <button class="btn btn-ghost" id="adminBtnResetDict">Nouveau terme</button>
                </div>
              </div>
            </div>
            
            <div class="content-card">
              <div class="card-content">
                <div class="flex mb-2">
                  <strong>Termes existants</strong>
                </div>
                <div id="dictionaryTermsList">
                  <p class="muted">Aucun terme pour le moment.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Lessons -->
          <div id="tab-lessons" class="admin-section">
            <div class="content-card mb-3">
              <div class="card-content">
                <h3 class="mb-2">Ajouter une leçon</h3>
                <div class="form-row">
                  <div class="form-group"><label>Titre de la leçon</label><input id="adminLessonTitle" type="text" placeholder="Ex: Introduction à la mécanique"></div>
                  <div class="form-group"><label>Chapitre</label><input id="adminLessonChapter" type="text" placeholder="Ex: Mécanique"></div>
                </div>
                <div class="form-group">
                  <label>Fichier PDF</label>
                  <input type="file" id="adminLessonFile" accept=".pdf">
                </div>
                <div class="mt-2">
                  <button class="btn btn-success" id="adminBtnSaveLesson"><i class="fa-solid fa-plus"></i> Ajouter la leçon</button>
                </div>
              </div>
            </div>
            
            <div class="content-card">
              <div class="card-content">
                <div class="flex mb-2">
                  <strong>Leçons existantes</strong>
                </div>
                <div id="lessonsAdminList">
                  <p class="muted">Aucune leçon pour le moment.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Exercises -->
          <div id="tab-exercises" class="admin-section">
            <div class="content-card mb-3">
              <div class="card-content">
                <h3 class="mb-2">Ajouter un exercice</h3>
                <div class="form-row">
                  <div class="form-group"><label>Titre de l'exercice</label><input id="adminExerciseTitle" type="text" placeholder="Ex: Exercices sur l'électricité"></div>
                  <div class="form-group"><label>Chapitre</label><input id="adminExerciseChapter" type="text" placeholder="Ex: Électricité"></div>
                </div>
                <div class="form-group">
                  <label>Fichier PDF</label>
                  <input type="file" id="adminExerciseFile" accept=".pdf">
                </div>
                <div class="mt-2">
                  <button class="btn btn-success" id="adminBtnSaveExercise"><i class="fa-solid fa-plus"></i> Ajouter l'exercice</button>
                </div>
              </div>
            </div>
            
            <div class="content-card">
              <div class="card-content">
                <div class="flex mb-2">
                  <strong>Exercices existants</strong>
                </div>
                <div id="exercisesAdminList">
                  <p class="muted">Aucun exercice pour le moment.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Exams -->
          <div id="tab-exams" class="admin-section">
            <div class="content-card mb-3">
              <div class="card-content">
                <h3 class="mb-2">Ajouter un examen</h3>
                <div class="form-row">
                  <div class="form-group"><label>Titre de l'examen</label><input id="adminExamTitle" type="text" placeholder="Ex: Examen Régional 2023"></div>
                  <div class="form-group"><label>Série</label><input id="adminExamSeries" type="text" placeholder="Ex: Sciences Physiques"></div>
                </div>
                <div class="form-group">
                  <label>Fichier PDF</label>
                  <input type="file" id="adminExamFile" accept=".pdf">
                </div>
                <div class="mt-2">
                  <button class="btn btn-success" id="adminBtnSaveExam"><i class="fa-solid fa-plus"></i> Ajouter l'examen</button>
                </div>
              </div>
            </div>
            
            <div class="content-card">
              <div class="card-content">
                <div class="flex mb-2">
                  <strong>Examens existants</strong>
                </div>
                <div id="examsAdminList">
                  <p class="muted">Aucun examen pour le moment.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Announcement - UPDATED WITH IMAGE SUPPORT -->
          <div id="tab-announcement" class="admin-section">
            <div class="content-card">
              <div class="card-content">
                <h3 class="mb-2">Gestion des Annonces</h3>
                <div class="form-group">
                  <label>Annonce actuelle</label>
                  <textarea id="announcementInput" rows="4" placeholder="Saisissez votre annonce ici...">ستبدأ الدراسة الفعلية يوم 16/09/2025 نتمنى لتلاميذ والتلميذات سنة دراسية مليئة بالجد ومثمرة</textarea>
                </div>
                <div class="form-group">
                  <label>Image d'annonce (optionnelle)</label>
                  <input type="file" id="announcementImageInput" accept="image/*">
                  <img id="announcementImagePreview" class="image-preview" src="" alt="Aperçu de l'image">
                </div>
                <div class="mt-2">
                  <button class="btn btn-success" id="btnSaveAnnouncement"><i class="fa-solid fa-save"></i> Enregistrer l'annonce</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Revision Requests - UPDATED TO "Demande de récorrection" -->
          <div id="tab-revisions" class="admin-section">
            <div class="content-card">
              <div class="card-content">
                <h3 class="mb-2">Demandes de Récorrection de Notes</h3>
                <div id="revisionRequestsList">
                  <p class="muted">Aucune demande de récorrection pour le moment.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Student Login Modal -->
  <div class="login-modal" id="studentLoginModal">
    <div class="login-form">
      <h2>Espace Élève</h2>
      <div class="form-group"><label>Nom d'utilisateur</label><input id="studentUsername" type="text" placeholder="Votre nom d'utilisateur"></div>
      <div class="form-group"><label>Mot de passe</label><input id="studentPassword" type="password" placeholder="Votre mot de passe"></div>
      <div class="form-buttons flex">
        <button class="btn btn-ghost" id="cancelStudentLogin">Annuler</button>
        <button class="btn btn-primary" id="submitStudentLogin">Se connecter</button>
      </div>
    </div>
  </div>

  <!-- Admin Login Modal -->
  <div class="login-modal" id="loginModal">
    <div class="login-form">
      <h2>Espace Professeur</h2>
      <div class="form-group"><label>Nom d'utilisateur</label><input id="username" type="text" placeholder="Nom d'utilisateur"></div>
      <div class="form-group"><label>Mot de passe</label><input id="password" type="password" placeholder="Mot de passe"></div>
      <div class="form-buttons flex">
        <button class="btn btn-ghost" id="cancelLogin">Annuler</button>
        <button class="btn btn-accent" id="submitLogin">Se connecter</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Informations de Contact</h3>
          <ul class="contact-info">
            <li><i class="fas fa-user"></i> Professeur: Pr. Ali Bairouk</li>
            <li><i class="fas fa-envelope"></i> Email: bairoukali.contacter@gmail.com</li>
            <li><i class="fas fa-phone"></i> Téléphone: 0620565105</li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Liens Rapides</h3>
          <ul class="contact-info">
            <li><i class="fas fa-book"></i> Lexique</li>
            <li><i class="fas fa-question-circle"></i> Quiz</li>
            <li><i class="fas fa-chart-line"></i> Notes</li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>À Propos du Site</h3>
          <p>Lycée de l'Excellence est une plateforme éducative spécialisée en physique.</p>
        </div>
      </div>
      <div class="footer-bottom"><p>&copy; 2025 Lycée de l'Excellence. Tous droits réservés</p></div>
    </div>
  </footer>

  <script>
    // البيانات المخزنة محلياً
    let appData = {
      students: [],
      grades: [],
      quiz: [],
      dictionary: [],
      lessons: [],
      exercises: [],
      exams: [],
      revisionRequests: [],
      announcement: {
        text: "ستبدأ الدراسة الفعلية يوم 16/09/2025 نتمنى لتلاميذ والتلميذات سنة دراسية مليئة بالجد ومثمرة",
        image: ""
      },
      admin: {
        username: "admin",
        password: "admin123"
      }
    };

    // تحميل البيانات من localStorage إذا كانت موجودة
    function loadData() {
      const savedData = localStorage.getItem('lycee_excellence_data');
      if (savedData) {
        appData = JSON.parse(savedData);
      }
      updateUI();
    }

    // حفظ البيانات إلى localStorage
    function saveData() {
      localStorage.setItem('lycee_excellence_data', JSON.stringify(appData));
      updateUI();
    }

    // تحديث واجهة المستخدم بناءً على البيانات الحالية
    function updateUI() {
      // تحديث الإحصائيات في لوحة التحكم
      document.getElementById('stats-students').textContent = appData.students.length;
      document.getElementById('stats-quiz').textContent = appData.quiz.length;
      document.getElementById('stats-dictionary').textContent = appData.dictionary.length;
      document.getElementById('stats-grades').textContent = appData.grades.length;

      // تحديث الإعلان
      document.getElementById('announcementText').textContent = appData.announcement.text;
      if (appData.announcement.image) {
        document.getElementById('announcementImage').src = appData.announcement.image;
        document.getElementById('announcementImage').style.display = 'block';
      }

      // تحديث قوائم المحتوى في الأقسام المختلفة
      updateLessonsList();
      updateExercisesList();
      updateExamsList();
      updateDictionaryList();
      updateQuizList();
      updateStudentsList();
      updateGradesList();
      updateRevisionRequestsList();
    }

    // تحديث قائمة الدروس
    function updateLessonsList() {
      const lessonsList = document.getElementById('lessonsAdminList');
      const lessonsContent = document.getElementById('lessonsContent');
      const studentLessons = document.getElementById('studentResources');
      
      if (appData.lessons.length === 0) {
        lessonsList.innerHTML = '<p class="muted">Aucune leçon pour le moment.</p>';
        lessonsContent.innerHTML = '<p class="muted">Aucune leçon disponible pour le moment.</p>';
        if (studentLessons) studentLessons.innerHTML = '<p class="muted">Aucune ressource disponible pour le moment.</p>';
        return;
      }
      
      let adminHtml = '';
      let contentHtml = '';
      let studentHtml = '';
      
      appData.lessons.forEach(lesson => {
        adminHtml += `
          <div class="content-item">
            <h4>${lesson.title}</h4>
            <p>Chapitre: ${lesson.chapter}</p>
            <a href="${lesson.file}" target="_blank">Voir le PDF</a>
            <button class="btn btn-outline btn-sm" onclick="deleteLesson(${lesson.id})">Supprimer</button>
          </div>
        `;
        
        contentHtml += `
          <div class="content-item">
            <h4>${lesson.title}</h4>
            <p>Chapitre: ${lesson.chapter}</p>
            <a href="${lesson.file}" target="_blank" class="btn btn-primary">Télécharger la leçon</a>
          </div>
        `;
        
        studentHtml += `
          <div class="content-item">
            <h4>${lesson.title}</h4>
            <p>Chapitre: ${lesson.chapter}</p>
            <a href="${lesson.file}" target="_blank" class="btn btn-primary">Télécharger</a>
          </div>
        `;
      });
      
      lessonsList.innerHTML = adminHtml;
      lessonsContent.innerHTML = contentHtml;
      if (studentLessons) studentLessons.innerHTML = studentHtml;
    }

    // تحديث قائمة التمارين
    function updateExercisesList() {
      const exercisesList = document.getElementById('exercisesAdminList');
      const exercisesContent = document.getElementById('exercisesContent');
      const studentExercises = document.getElementById('studentExercisesList');
      
      if (appData.exercises.length === 0) {
        exercisesList.innerHTML = '<p class="muted">Aucun exercice pour le moment.</p>';
        exercisesContent.innerHTML = '<p class="muted">Aucun exercice disponible pour le moment.</p>';
        if (studentExercises) studentExercises.innerHTML = '<p class="muted">Aucun exercice disponible pour le moment.</p>';
        return;
      }
      
      let adminHtml = '';
      let contentHtml = '';
      let studentHtml = '';
      
      appData.exercises.forEach(exercise => {
        adminHtml += `
          <div class="content-item">
            <h4>${exercise.title}</h4>
            <p>Chapitre: ${exercise.chapter}</p>
            <a href="${exercise.file}" target="_blank">Voir le PDF</a>
            <button class="btn btn-outline btn-sm" onclick="deleteExercise(${exercise.id})">Supprimer</button>
          </div>
        `;
        
        contentHtml += `
          <div class="content-item">
            <h4>${exercise.title}</h4>
            <p>Chapitre: ${exercise.chapter}</p>
            <a href="${exercise.file}" target="_blank" class="btn btn-primary">Télécharger l'exercice</a>
          </div>
        `;
        
        studentHtml += `
          <div class="content-item">
            <h4>${exercise.title}</h4>
            <p>Chapitre: ${exercise.chapter}</p>
            <a href="${exercise.file}" target="_blank" class="btn btn-primary">Télécharger</a>
          </div>
        `;
      });
      
      exercisesList.innerHTML = adminHtml;
      exercisesContent.innerHTML = contentHtml;
      if (studentExercises) studentExercises.innerHTML = studentHtml;
    }

    // تحديث قائمة الامتحانات
    function updateExamsList() {
      const examsList = document.getElementById('examsAdminList');
      const examsContent = document.getElementById('examsContent');
      
      if (appData.exams.length === 0) {
        examsList.innerHTML = '<p class="muted">Aucun examen pour le moment.</p>';
        examsContent.innerHTML = '<p class="muted">Aucun examen disponible pour le moment.</p>';
        return;
      }
      
      let adminHtml = '';
      let contentHtml = '';
      
      appData.exams.forEach(exam => {
        adminHtml += `
          <div class="content-item">
            <h4>${exam.title}</h4>
            <p>Série: ${exam.series}</p>
            <a href="${exam.file}" target="_blank">Voir le PDF</a>
            <button class="btn btn-outline btn-sm" onclick="deleteExam(${exam.id})">Supprimer</button>
          </div>
        `;
        
        contentHtml += `
          <div class="content-item">
            <h4>${exam.title}</h4>
            <p>Série: ${exam.series}</p>
            <a href="${exam.file}" target="_blank" class="btn btn-primary">Télécharger l'examen</a>
          </div>
        `;
      });
      
      examsList.innerHTML = adminHtml;
      examsContent.innerHTML = contentHtml;
    }

    // تحديث قائمة المصطلحات
    function updateDictionaryList() {
      const dictionaryList = document.getElementById('dictionaryTermsList');
      const dictionaryContent = document.getElementById('dictionaryContent');
      const studentDictionary = document.getElementById('studentDictionaryContent');
      
      if (appData.dictionary.length === 0) {
        dictionaryList.innerHTML = '<p class="muted">Aucun terme pour le moment.</p>';
        dictionaryContent.innerHTML = '<p class="muted">Aucun terme disponible pour le moment.</p>';
        if (studentDictionary) studentDictionary.innerHTML = '<p class="muted">Aucun terme disponible pour le moment.</p>';
        return;
      }
      
      let adminHtml = '';
      let contentHtml = '';
      let studentHtml = '';
      
      appData.dictionary.forEach(term => {
        adminHtml += `
          <div class="content-item">
            <h4>${term.ar} - ${term.fr}</h4>
            <p>${term.definition}</p>
            <button class="btn btn-outline btn-sm" onclick="deleteDictionaryTerm(${term.id})">Supprimer</button>
          </div>
        `;
        
        contentHtml += `
          <div class="content-item">
            <h4>${term.ar}</h4>
            <p><strong>Français:</strong> ${term.fr}</p>
            <p>${term.definition}</p>
          </div>
        `;
        
        studentHtml += `
          <div class="content-item">
            <h4>${term.ar}</h4>
            <p><strong>Français:</strong> ${term.fr}</p>
            <p>${term.definition}</p>
          </div>
        `;
      });
      
      dictionaryList.innerHTML = adminHtml;
      dictionaryContent.innerHTML = contentHtml;
      if (studentDictionary) studentDictionary.innerHTML = studentHtml;
    }

    // تحديث قائمة الأسئلة
    function updateQuizList() {
      const quizList = document.getElementById('quizQuestionsList');
      const quizContent = document.getElementById('quizContent');
      
      if (appData.quiz.length === 0) {
        quizList.innerHTML = '<p class="muted">Aucune question pour le moment.</p>';
        quizContent.innerHTML = '<p class="muted">Aucun quiz disponible pour le moment.</p>';
        return;
      }
      
      let adminHtml = '';
      let contentHtml = '';
      
      appData.quiz.forEach((question, index) => {
        adminHtml += `
          <div class="content-item">
            <h4>Question ${index + 1}: ${question.question}</h4>
            <ol>
              <li>${question.options[0]}</li>
              <li>${question.options[1]}</li>
              <li>${question.options[2]}</li>
              <li>${question.options[3]}</li>
            </ol>
            <p><strong>Réponse correcte:</strong> ${question.correct}</p>
            <button class="btn btn-outline btn-sm" onclick="deleteQuizQuestion(${question.id})">Supprimer</button>
          </div>
        `;
      });
      
      contentHtml = `
        <div class="content-card">
          <div class="card-content">
            <h3>Quiz de Physique</h3>
            <p>Testez vos connaissances avec nos quiz interactifs.</p>
            <button class="btn btn-primary" id="startQuizBtn">Commencer un quiz</button>
          </div>
        </div>
      `;
      
      quizList.innerHTML = adminHtml;
      quizContent.innerHTML = contentHtml;
    }

    // تحديث قائمة الطلاب
    function updateStudentsList() {
      const studentsList = document.getElementById('studentsTable').querySelector('tbody');
      const grStudent = document.getElementById('grStudent');
      const grFilterStudent = document.getElementById('grFilterStudent');
      const revisionExam = document.getElementById('revisionExam');
      
      studentsList.innerHTML = '';
      grStudent.innerHTML = '<option value="">Sélectionner un étudiant</option>';
      grFilterStudent.innerHTML = '<option value="">Tous les étudiants</option>';
      revisionExam.innerHTML = '<option value="">Sélectionnez une évaluation</option>';
      
      if (appData.students.length === 0) {
        studentsList.innerHTML = '<tr><td colspan="5" class="muted">Aucun étudiant enregistré.</td></tr>';
        return;
      }
      
      appData.students.forEach(student => {
        // تحديث جدول الطلاب
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${student.fullname}</td>
          <td>${student.username}</td>
          <td>${student.code}</td>
          <td>${student.classroom}</td>
          <td>
            <button class="btn btn-outline btn-sm" onclick="editStudent(${student.id})">Modifier</button>
            <button class="btn btn-outline btn-sm" onclick="deleteStudent(${student.id})">Supprimer</button>
          </td>
        `;
        studentsList.appendChild(row);
        
        // تحديث قوائم الاختيار
        const option = document.createElement('option');
        option.value = student.id;
        option.textContent = student.fullname;
        grStudent.appendChild(option.cloneNode(true));
        
        const option2 = document.createElement('option');
        option2.value = student.id;
        option2.textContent = student.fullname;
        grFilterStudent.appendChild(option2.cloneNode(true));
        
        // تحديث قائمة التقييمات لطلبات المراجعة
        const studentGrades = appData.grades.filter(grade => grade.studentId === student.id);
        studentGrades.forEach(grade => {
          const option3 = document.createElement('option');
          option3.value = grade.id;
          option3.textContent = `${grade.title} - ${grade.score}/20`;
          revisionExam.appendChild(option3);
        });
      });
    }

    // تحديث قائمة الدرجات
    function updateGradesList() {
      const gradesList = document.getElementById('gradesAdminTable').querySelector('tbody');
      const selectedStudentId = document.getElementById('grFilterStudent').value;
      
      gradesList.innerHTML = '';
      
      let filteredGrades = appData.grades;
      if (selectedStudentId) {
        filteredGrades = appData.grades.filter(grade => grade.studentId == selectedStudentId);
      }
      
      if (filteredGrades.length === 0) {
        gradesList.innerHTML = '<tr><td colspan="7" class="muted">Aucune note enregistrée.</td></tr>';
        return;
      }
      
      filteredGrades.forEach(grade => {
        const student = appData.students.find(s => s.id == grade.studentId);
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${student ? student.fullname : 'Inconnu'}</td>
          <td>${grade.date}</td>
          <td>${grade.subject}</td>
          <td>${grade.title}</td>
          <td>${grade.score}/20</td>
          <td>${grade.note}</td>
          <td>
            <button class="btn btn-outline btn-sm" onclick="editGrade(${grade.id})">Modifier</button>
            <button class="btn btn-outline btn-sm" onclick="deleteGrade(${grade.id})">Supprimer</button>
          </td>
        `;
        gradesList.appendChild(row);
      });
    }

    // تحديث قائمة طلبات المراجعة
    function updateRevisionRequestsList() {
      const requestsList = document.getElementById('revisionRequestsList');
      const studentRequests = document.getElementById('studentRevisionRequests');
      
      if (appData.revisionRequests.length === 0) {
        requestsList.innerHTML = '<p class="muted">Aucune demande de récorrection pour le moment.</p>';
        if (studentRequests) studentRequests.innerHTML = '<p class="muted">Vous n\'avez pas encore soumis de demandes de récorrection.</p>';
        return;
      }
      
      let adminHtml = '';
      let studentHtml = '';
      
      appData.revisionRequests.forEach(request => {
        const student = appData.students.find(s => s.id == request.studentId);
        const grade = appData.grades.find(g => g.id == request.examId);
        
        if (student && grade) {
          adminHtml += `
            <div class="content-item">
              <h4>${student.fullname} - ${grade.title}</h4>
              <p><strong>Note actuelle:</strong> ${grade.score}/20</p>
              <p><strong>Message:</strong> ${request.message}</p>
              <p><strong>Date:</strong> ${request.date}</p>
              <button class="btn btn-outline btn-sm" onclick="processRevisionRequest(${request.id}, true)">Accepter</button>
              <button class="btn btn-outline btn-sm" onclick="processRevisionRequest(${request.id}, false)">Rejeter</button>
            </div>
          `;
        }
        
        // فقط الطلبات الخاصة بالطالب الحالي
        if (studentRequests && request.studentId == currentStudentId) {
          studentHtml += `
            <div class="content-item">
              <h4>${grade.title}</h4>
              <p><strong>Note actuelle:</strong> ${grade.score}/20</p>
              <p><strong>Message:</strong> ${request.message}</p>
              <p><strong>Date:</strong> ${request.date}</p>
              <p><strong>Statut:</strong> ${request.status}</p>
            </div>
          `;
        }
      });
      
      requestsList.innerHTML = adminHtml;
      if (studentRequests) studentRequests.innerHTML = studentHtml || '<p class="muted">Vous n\'avez pas encore soumis de demandes de récorrection.</p>';
    }

    // دالة لتحويل الملف إلى base64
    function readFileAsBase64(file, callback) {
      const reader = new FileReader();
      reader.onload = function() {
        callback(reader.result);
      };
      reader.readAsDataURL(file);
    }

    // إضافة درس جديد
    function addLesson(title, chapter, fileData) {
      const newId = appData.lessons.length > 0 ? Math.max(...appData.lessons.map(l => l.id)) + 1 : 1;
      appData.lessons.push({
        id: newId,
        title,
        chapter,
        file: fileData
      });
      saveData();
    }

    // إضافة تمرين جديد
    function addExercise(title, chapter, fileData) {
      const newId = appData.exercises.length > 0 ? Math.max(...appData.exercises.map(e => e.id)) + 1 : 1;
      appData.exercises.push({
        id: newId,
        title,
        chapter,
        file: fileData
      });
      saveData();
    }

    // إضافة امتحان جديد
    function addExam(title, series, fileData) {
      const newId = appData.exams.length > 0 ? Math.max(...appData.exams.map(e => e.id)) + 1 : 1;
      appData.exams.push({
        id: newId,
        title,
        series,
        file: fileData
      });
      saveData();
    }

    // إضافة مصطلح جديد
    function addDictionaryTerm(ar, fr, definition) {
      const newId = appData.dictionary.length > 0 ? Math.max(...appData.dictionary.map(t => t.id)) + 1 : 1;
      appData.dictionary.push({
        id: newId,
        ar,
        fr,
        definition
      });
      saveData();
    }

    // إضافة سؤال جديد
    function addQuizQuestion(question, options, correct, image = null) {
      const newId = appData.quiz.length > 0 ? Math.max(...appData.quiz.map(q => q.id)) + 1 : 1;
      appData.quiz.push({
        id: newId,
        question,
        options,
        correct,
        image
      });
      saveData();
    }

    // إضافة طالب جديد
    function addStudent(fullname, username, password, code, classroom) {
      const newId = appData.students.length > 0 ? Math.max(...appData.students.map(s => s.id)) + 1 : 1;
      appData.students.push({
        id: newId,
        fullname,
        username,
        password,
        code,
        classroom
      });
      saveData();
    }

    // إضافة درجة جديدة
    function addGrade(studentId, subject, title, date, score, note) {
      const newId = appData.grades.length > 0 ? Math.max(...appData.grades.map(g => g.id)) + 1 : 1;
      appData.grades.push({
        id: newId,
        studentId,
        subject,
        title,
        date,
        score,
        note
      });
      saveData();
    }

    // إضافة طلب مراجعة
    function addRevisionRequest(studentId, examId, message) {
      const newId = appData.revisionRequests.length > 0 ? Math.max(...appData.revisionRequests.map(r => r.id)) + 1 : 1;
      appData.revisionRequests.push({
        id: newId,
        studentId,
        examId,
        message,
        date: new Date().toLocaleDateString(),
        status: "En attente"
      });
      saveData();
    }

    // حذف درس
    function deleteLesson(id) {
      appData.lessons = appData.lessons.filter(lesson => lesson.id !== id);
      saveData();
    }

    // حذف تمرين
    function deleteExercise(id) {
      appData.exercises = appData.exercises.filter(exercise => exercise.id !== id);
      saveData();
    }

    // حذف امتحان
    function deleteExam(id) {
      appData.exams = appData.exams.filter(exam => exam.id !== id);
      saveData();
    }

    // حذف مصطلح
    function deleteDictionaryTerm(id) {
      appData.dictionary = appData.dictionary.filter(term => term.id !== id);
      saveData();
    }

    // حذف سؤال
    function deleteQuizQuestion(id) {
      appData.quiz = appData.quiz.filter(question => question.id !== id);
      saveData();
    }

    // حذف طالب
    function deleteStudent(id) {
      appData.students = appData.students.filter(student => student.id !== id);
      // حذف درجات الطالب أيضا
      appData.grades = appData.grades.filter(grade => grade.studentId !== id);
      saveData();
    }

    // حذف درجة
    function deleteGrade(id) {
      appData.grades = appData.grades.filter(grade => grade.id !== id);
      saveData();
    }

    // معالجة طلب المراجعة
    function processRevisionRequest(id, accepted) {
      const request = appData.revisionRequests.find(r => r.id === id);
      if (request) {
        request.status = accepted ? "Acceptée" : "Rejetée";
        saveData();
      }
    }

    // متغيرات الحالة
    let currentStudentId = null;
    let currentAdminLoggedIn = false;

    // تهيئة التطبيق
    document.addEventListener('DOMContentLoaded', function() {
      loadData();
      
      // إعداد مستمعي الأحداث
      setupEventListeners();
      
      // إظهار قسم الصفحة الرئيسية افتراضياً
      showSection('home');
    });

    // إعداد مستمعي الأحداث
    function setupEventListeners() {
      // التنقل بين الأقسام
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const section = this.getAttribute('data-section');
          showSection(section);
        });
      });
      
      // الأزرار في بطاقات الميزات
      document.querySelectorAll('.feature-card').forEach(card => {
        card.addEventListener('click', function() {
          const section = this.getAttribute('data-section');
          showSection(section);
        });
      });
      
      // تسجيل الدخول كطالب
      document.getElementById('studentLoginBtn').addEventListener('click', function() {
        document.getElementById('studentLoginModal').style.display = 'flex';
      });
      
      document.getElementById('cancelStudentLogin').addEventListener('click', function() {
        document.getElementById('studentLoginModal').style.display = 'none';
      });
      
      document.getElementById('submitStudentLogin').addEventListener('click', function() {
        const username = document.getElementById('studentUsername').value;
        const password = document.getElementById('studentPassword').value;
        
        const student = appData.students.find(s => s.username === username && s.password === password);
        
        if (student) {
          currentStudentId = student.id;
          document.getElementById('studentWelcome').textContent = `Bienvenue, ${student.fullname}`;
          document.getElementById('student-dashboard').style.display = 'block';
          document.getElementById('studentLoginModal').style.display = 'none';
          showStudentTab('dashboard');
        } else {
          alert('Nom d\'utilisateur ou mot de passe incorrect');
        }
      });
      
      // تسجيل الدخول كأدمن
      document.getElementById('loginBtn').addEventListener('click', function() {
        document.getElementById('loginModal').style.display = 'flex';
      });
      
      document.getElementById('cancelLogin').addEventListener('click', function() {
        document.getElementById('loginModal').style.display = 'none';
      });
      
      document.getElementById('submitLogin').addEventListener('click', function() {
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        
        if (username === appData.admin.username && password === appData.admin.password) {
          currentAdminLoggedIn = true;
          document.getElementById('admin-panel').style.display = 'block';
          document.getElementById('loginModal').style.display = 'none';
          showAdminTab('tab-dashboard');
        } else {
          alert('Nom d\'utilisateur ou mot de passe incorrect');
        }
      });
      
      // تسجيل الخروج
      document.getElementById('logoutBtn').addEventListener('click', function() {
        currentAdminLoggedIn = false;
        document.getElementById('admin-panel').style.display = 'none';
      });
      
      document.getElementById('adminLogoutBtn').addEventListener('click', function() {
        currentAdminLoggedIn = false;
        document.getElementById('admin-panel').style.display = 'none';
      });
      
      document.getElementById('studentLogoutBtn').addEventListener('click', function() {
        currentStudentId = null;
        document.getElementById('student-dashboard').style.display = 'none';
      });
      
      // التنقل بين علامات التبويب في لوحة الطالب
      document.querySelectorAll('.student-tab').forEach(tab => {
        tab.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          showStudentTab(tabName);
        });
      });
      
      // التنقل بين علامات التبويب في لوحة الأدمن
      document.querySelectorAll('.admin-tab-link').forEach(tab => {
        tab.addEventListener('click', function(e) {
          e.preventDefault();
          const tabName = this.getAttribute('data-tab');
          showAdminTab(tabName);
        });
      });
      
      // حفظ الدروس
      document.getElementById('adminBtnSaveLesson').addEventListener('click', function() {
        const title = document.getElementById('adminLessonTitle').value;
        const chapter = document.getElementById('adminLessonChapter').value;
        const fileInput = document.getElementById('adminLessonFile');
        
        if (!title || !chapter || !fileInput.files[0]) {
          alert('Veuillez remplir tous les champs');
          return;
        }
        
        readFileAsBase64(fileInput.files[0], function(base64) {
          addLesson(title, chapter, base64);
          alert('Leçon ajoutée avec succès!');
          document.getElementById('adminLessonTitle').value = '';
          document.getElementById('adminLessonChapter').value = '';
          fileInput.value = '';
        });
      });
      
      // حفظ التمارين
      document.getElementById('adminBtnSaveExercise').addEventListener('click', function() {
        const title = document.getElementById('adminExerciseTitle').value;
        const chapter = document.getElementById('adminExerciseChapter').value;
        const fileInput = document.getElementById('adminExerciseFile');
        
        if (!title || !chapter || !fileInput.files[0]) {
          alert('Veuillez remplir tous les champs');
          return;
        }
        
        readFileAsBase64(fileInput.files[0], function(base64) {
          addExercise(title, chapter, base64);
          alert('Exercice ajouté avec succès!');
          document.getElementById('adminExerciseTitle').value = '';
          document.getElementById('adminExerciseChapter').value = '';
          fileInput.value = '';
        });
      });
      
      // حفظ الامتحانات
      document.getElementById('adminBtnSaveExam').addEventListener('click', function() {
        const title = document.getElementById('adminExamTitle').value;
        const series = document.getElementById('adminExamSeries').value;
        const fileInput = document.getElementById('adminExamFile');
        
        if (!title || !series || !fileInput.files[0]) {
          alert('Veuillez remplir tous les champs');
          return;
        }
        
        readFileAsBase64(fileInput.files[0], function(base64) {
          addExam(title, series, base64);
          alert('Examen ajouté avec succès!');
          document.getElementById('adminExamTitle').value = '';
          document.getElementById('adminExamSeries').value = '';
          fileInput.value = '';
        });
      });
      
      // حفظ المصطلحات
      document.getElementById('adminBtnSaveDict').addEventListener('click', function() {
        const ar = document.getElementById('adminDictAr').value;
        const fr = document.getElementById('adminDictFr').value;
        const definition = document.getElementById('adminDictDef').value;
        
        if (!ar || !fr) {
          alert('Veuillez remplir les termes arabe et français');
          return;
        }
        
        addDictionaryTerm(ar, fr, definition);
        alert('Terme ajouté avec succès!');
        document.getElementById('adminDictAr').value = '';
        document.getElementById('adminDictFr').value = '';
        document.getElementById('adminDictDef').value = '';
      });
      
      // حفظ الأسئلة
      document.getElementById('adminBtnSaveQuiz').addEventListener('click', function() {
        const question = document.getElementById('adminQuizQuestion').value;
        const option1 = document.getElementById('adminOption1').value;
        const option2 = document.getElementById('adminOption2').value;
        const option3 = document.getElementById('adminOption3').value;
        const option4 = document.getElementById('adminOption4').value;
        const correct = document.getElementById('adminQuizCorrect').value;
        
        if (!question || !option1 || !option2 || !option3 || !option4) {
          alert('Veuillez remplir tous les champs');
          return;
        }
        
        const options = [option1, option2, option3, option4];
        let imageData = null;
        
        const imageInput = document.getElementById('adminQuizImage');
        if (imageInput.files[0]) {
          readFileAsBase64(imageInput.files[0], function(base64) {
            imageData = base64;
            addQuizQuestion(question, options, correct, imageData);
            alert('Question ajoutée avec succès!');
            resetQuizForm();
          });
        } else {
          addQuizQuestion(question, options, correct);
          alert('Question ajoutée avec succès!');
          resetQuizForm();
        }
      });
      
      // حفظ الطلاب
      document.getElementById('btnSaveStudent').addEventListener('click', function() {
        const id = document.getElementById('stId').value;
        const fullname = document.getElementById('stFullname').value;
        const username = document.getElementById('stUsername').value;
        const password = document.getElementById('stPassword').value;
        const code = document.getElementById('stCode').value;
        const classroom = document.getElementById('stClassroom').value;
        
        if (!fullname || !username || !password || !code || !classroom) {
          alert('Veuillez remplir tous les champs');
          return;
        }
        
        if (id) {
          // تعديل طالب موجود
          const studentIndex = appData.students.findIndex(s => s.id == id);
          if (studentIndex !== -1) {
            appData.students[studentIndex] = {
              id: parseInt(id),
              fullname,
              username,
              password,
              code,
              classroom
            };
            saveData();
            alert('Étudiant modifié avec succès!');
          }
        } else {
          // إضافة طالب جديد
          addStudent(fullname, username, password, code, classroom);
          alert('Étudiant ajouté avec succès!');
        }
        
        resetStudentForm();
      });
      
      // حفظ الدرجات
      document.getElementById('btnSaveGrade').addEventListener('click', function() {
        const id = document.getElementById('grId').value;
        const studentId = document.getElementById('grStudent').value;
        const subject = document.getElementById('grSubject').value;
        const title = document.getElementById('grTitle').value;
        const date = document.getElementById('grDate').value;
        const score = document.getElementById('grScore').value;
        const note = document.getElementById('grNote').value;
        
        if (!studentId || !subject || !title || !date || !score) {
          alert('Veuillez remplir tous les champs obligatoires');
          return;
        }
        
        if (id) {
          // تعديل درجة موجودة
          const gradeIndex = appData.grades.findIndex(g => g.id == id);
          if (gradeIndex !== -1) {
            appData.grades[gradeIndex] = {
              id: parseInt(id),
              studentId: parseInt(studentId),
              subject,
              title,
              date,
              score: parseFloat(score),
              note
            };
            saveData();
            alert('Note modifiée avec succès!');
          }
        } else {
          // إضافة درجة جديدة
          addGrade(parseInt(studentId), subject, title, date, parseFloat(score), note);
          alert('Note ajoutée avec succès!');
        }
        
        resetGradeForm();
      });
      
      // حفظ الإعلان
      document.getElementById('btnSaveAnnouncement').addEventListener('click', function() {
        const text = document.getElementById('announcementInput').value;
        const imageInput = document.getElementById('announcementImageInput');
        
        if (!text) {
          alert('Veuillez saisir un texte d\'annonce');
          return;
        }
        
        appData.announcement.text = text;
        
        if (imageInput.files[0]) {
          readFileAsBase64(imageInput.files[0], function(base64) {
            appData.announcement.image = base64;
            saveData();
            alert('Annonce enregistrée avec succès!');
          });
        } else {
          saveData();
          alert('Annonce enregistrée avec succès!');
        }
      });
      
      // طلب المراجعة
      document.getElementById('revisionRequestForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const examId = document.getElementById('revisionExam').value;
        const message = document.getElementById('revisionMessage').value;
        
        if (!examId || !message) {
          alert('Veuillez remplir tous les champs');
          return;
        }
        
        addRevisionRequest(currentStudentId, parseInt(examId), message);
        alert('Demande de récorrection envoyée avec succès!');
        this.reset();
      });
      
      // تصفية الطلاب
      document.getElementById('filterStudents').addEventListener('input', function() {
        const filter = this.value.toLowerCase();
        const rows = document.querySelectorAll('#studentsTable tbody tr');
        
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(filter) ? '' : 'none';
        });
      });
      
      // تصفية الدرجات حسب الطالب
      document.getElementById('grFilterStudent').addEventListener('change', function() {
        updateGradesList();
      });
      
      // البحث عن الدرجات بواسطة الكود
      document.getElementById('btnSearchByCode').addEventListener('click', function() {
        const code = document.getElementById('searchCode').value;
        const student = appData.students.find(s => s.code === code);
        
        if (student) {
          const grades = appData.grades.filter(g => g.studentId == student.id);
          displayStudentGrades(student, grades);
        } else {
          alert('Aucun étudiant trouvé avec ce code');
        }
      });
      
      // إعادة تعيين نموذج الطالب
      document.getElementById('btnResetStudent').addEventListener('click', resetStudentForm);
      
      // إعادة تعيين نموذج الدرجات
      document.getElementById('btnResetGrade').addEventListener('click', resetGradeForm);
      
      // إعادة تعيين نموذج الأسئلة
      document.getElementById('adminBtnResetQuiz').addEventListener('click', resetQuizForm);
      
      // إعادة تعيين نموذج المصطلحات
      document.getElementById('adminBtnResetDict').addEventListener('click', function() {
        document.getElementById('adminDictAr').value = '';
        document.getElementById('adminDictFr').value = '';
        document.getElementById('adminDictDef').value = '';
      });
      
      // معاينة صورة الإعلان
      document.getElementById('announcementImageInput').addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
          readFileAsBase64(file, function(base64) {
            document.getElementById('announcementImagePreview').src = base64;
            document.getElementById('announcementImagePreview').style.display = 'block';
          });
        }
      });
    }

    // إظهار قسم معين وإخفاء الآخرين
    function showSection(section) {
      // إخفاء جميع الأقسام
      document.querySelectorAll('.page-section').forEach(sec => {
        sec.style.display = 'none';
      });
      
      // إخفاء لوحة التحكم إذا كانت ظاهرة
      document.getElementById('student-dashboard').style.display = 'none';
      document.getElementById('admin-panel').style.display = 'none';
      
      // إظهار القسم المطلوب
      if (section === 'home') {
        // الصفحة الرئيسية معروضة بالفعل
      } else {
        document.getElementById(section).style.display = 'block';
      }
      
      // إذا كان المستخدم مسجلاً كطالب، أظهر لوحة التحكم عند النقر على الأقسام
      if (currentStudentId && section !== 'home') {
        document.getElementById('student-dashboard').style.display = 'block';
        showStudentTab(section);
      }
    }

    // إظهار علامة التبويب المحددة في لوحة الطالب
    function showStudentTab(tabName) {
      // إخفاء جميع علامات التبويب
      document.querySelectorAll('.student-tab-content').forEach(tab => {
        tab.style.display = 'none';
      });
      
      // إلغاء تنشيط جميع علامات التبويب
      document.querySelectorAll('.student-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // تنشيط علامة التبويب المحددة
      document.querySelector(`.student-tab[data-tab="${tabName}"]`).classList.add('active');
      
      // إظهار محتوى علامة التبويب المحددة
      document.getElementById(`student-${tabName}-tab`).style.display = 'block';
    }

    // إظهار علامة التبويب المحددة في لوحة الأدمن
    function showAdminTab(tabName) {
      // إخفاء جميع علامات التبويب
      document.querySelectorAll('.admin-section').forEach(tab => {
        tab.style.display = 'none';
      });
      
      // إلغاء تنشيط جميع علامات التبويب
      document.querySelectorAll('.admin-tab-link').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // تنشيط علامة التبويب المحددة
      document.querySelector(`.admin-tab-link[data-tab="${tabName}"]`).classList.add('active');
      
      // إظهار محتوى علامة التبويب المحددة
      document.getElementById(tabName).style.display = 'block';
    }

    // إعادة تعيين نموذج الطالب
    function resetStudentForm() {
      document.getElementById('stId').value = '';
      document.getElementById('stFullname').value = '';
      document.getElementById('stUsername').value = '';
      document.getElementById('stPassword').value = '';
      document.getElementById('stCode').value = '';
      document.getElementById('stClassroom').value = '';
    }

    // إعادة تعيين نموذج الدرجات
    function resetGradeForm() {
      document.getElementById('grId').value = '';
      document.getElementById('grStudent').value = '';
      document.getElementById('grSubject').value = '';
      document.getElementById('grTitle').value = '';
      document.getElementById('grDate').value = '';
      document.getElementById('grScore').value = '';
      document.getElementById('grNote').value = '';
    }

    // إعادة تعيين نموذج الأسئلة
    function resetQuizForm() {
      document.getElementById('adminQuizQuestion').value = '';
      document.getElementById('adminOption1').value = '';
      document.getElementById('adminOption2').value = '';
      document.getElementById('adminOption3').value = '';
      document.getElementById('adminOption4').value = '';
      document.getElementById('adminQuizCorrect').value = '1';
      document.getElementById('adminQuizImage').value = '';
    }

    // عرض درجات الطالب
    function displayStudentGrades(student, grades) {
      document.getElementById('studentInfo').innerHTML = `
        <div class="content-card">
          <div class="card-content">
            <h3>${student.fullname}</h3>
            <p>Code Parcours: ${student.code}</p>
            <p>Classe: ${student.classroom}</p>
          </div>
        </div>
      `;
      
      const tbody = document.getElementById('gradesTable').querySelector('tbody');
      tbody.innerHTML = '';
      
      if (grades.length === 0) {
        document.getElementById('noGradesMsg').style.display = 'block';
      } else {
        document.getElementById('noGradesMsg').style.display = 'none';
        grades.forEach(grade => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${grade.date}</td>
            <td>${grade.subject}</td>
            <td>${grade.title}</td>
            <td>${grade.score}/20</td>
            <td>${grade.note}</td>
          `;
          tbody.appendChild(row);
        });
      }
      
      document.getElementById('gradesResults').style.display = 'block';
    }

    // تحرير طالب
    function editStudent(id) {
      const student = appData.students.find(s => s.id === id);
      if (student) {
        document.getElementById('stId').value = student.id;
        document.getElementById('stFullname').value = student.fullname;
        document.getElementById('stUsername').value = student.username;
        document.getElementById('stPassword').value = student.password;
        document.getElementById('stCode').value = student.code;
        document.getElementById('stClassroom').value = student.classroom;
      }
    }

    // تحرير درجة
    function editGrade(id) {
      const grade = appData.grades.find(g => g.id === id);
      if (grade) {
        document.getElementById('grId').value = grade.id;
        document.getElementById('grStudent').value = grade.studentId;
        document.getElementById('grSubject').value = grade.subject;
        document.getElementById('grTitle').value = grade.title;
        document.getElementById('grDate').value = grade.date;
        document.getElementById('grScore').value = grade.score;
        document.getElementById('grNote').value = grade.note;
      }
    }
  </script>
</body>
</html>  
